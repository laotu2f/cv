<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>B·∫£ng C√¥ng vi·ªác H√†ng Ng√†y</title>
    <style>
      /* Gi·ªØ nguy√™n to√†n b·ªô CSS c≈© */
      #login-container {
        text-align: center;
        margin-top: 100px;
        background: linear-gradient(135deg, #74ebd5, #acb6e5);
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        max-width: 400px;
        margin-left: auto;
        margin-right: auto;
        color: white;
      }
      #login-container h2 {
        color: #fff;
        font-size: 28px;
      }
      #login-container input[type="text"] {
        width: 80%;
        padding: 10px;
        border: none;
        border-radius: 5px;
        margin-top: 10px;
        font-size: 18px;
      }
      #login-container button {
        padding: 10px 20px;
        font-size: 18px;
        background-color: #fff;
        color: #007bff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background 0.3s ease;
        margin-top: 10px;
      }
      #login-container button:hover {
        background-color: #f1f1f1;
      }
      .motivation {
        font-style: italic;
        margin-top: 20px;
        color: #fff;
        font-size: 18px;
      }
      body {
        font-family: Arial, sans-serif;
        padding: 10px;
        background-color: #f0f2f5;
      }
      h2 {
        text-align: center;
        color: #333;
        font-weight: bold;
        margin-bottom: 20px;
      }
      table {
        width: 100%;
        max-width: 800px;
        margin: 0 auto;
        border-collapse: collapse;
        background: white;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }
      table,
      th,
      td {
        border: 1px solid #ddd;
      }
      th,
      td {
        padding: 10px;
        text-align: center;
      }
      select,
      input[type="text"],
      input[type="number"] {
        width: 90%;
        padding: 5px;
        box-sizing: border-box;
        margin-top: 5px;
      }
      .details {
        display: none;
      }
      .details.active {
        display: block;
      }
      .hidden {
        display: none;
      }
      .details-container {
        text-align: left;
        margin-top: 5px;
      }
      .summary {
        width: 90%;
        max-width: 800px;
        margin: 20px auto;
        background: white;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        padding: 15px;
        border-radius: 5px;
      }
      .summary h3 {
        text-align: center;
        color: #007bff;
      }
      .summary p {
        font-size: 16px;
        margin: 5px 0;
      }
      .pt-row {
        background-color: #c8e6c9;
      }
      .setup-row {
        background-color: #ffe082;
      }
      .appt-row {
        background-color: #bbdefb;
      }
      .off-row {
        background-color: #e0e0e0;
      }
      .call-row {
        background-color: #f8bbd0;
      }
      .train-row {
        background-color: #d1c4e9;
      }
      .fl-row {
        background-color: #b2ebf2;
      }
      .eat-row {
        background-color: #ffccbc;
      }
      .floor-row {
        background-color: #c5cae9;
      }
      .custom-row {
        background-color: #f5f5f5;
      }
      @media screen and (max-width: 600px) {
        table {
          width: 100%;
          font-size: 14px;
        }
        select,
        input[type="text"],
        input[type="number"] {
          width: 90%;
        }
      }
      #submit-btn {
        padding: 15px 30px;
        font-size: 18px;
        background-color: #28a745;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }
      #submit-btn:disabled {
        background-color: #cccccc;
        cursor: not-allowed;
      }
      #notification {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        padding: 10px 20px;
        color: white;
        border-radius: 5px;
        display: none;
        z-index: 1000;
      }
      .copy-success {
        background-color: #28a745;
        animation: bounce 0.5s ease;
      }
      @keyframes bounce {
        0% { transform: translateX(-50%) translateY(0); }
        50% { transform: translateX(-50%) translateY(-10px); }
        100% { transform: translateX(-50%) translateY(0); }
      }
      /* CSS m·ªõi cho √¥ nh·∫≠p li·ªáu, tinh ch·ªânh ƒë·ªÉ ƒë·ªìng nh·∫•t v√† ƒë·∫πp h∆°n, cƒÉn tr√°i */
      .monthly-inputs {
        width: 90%;
        max-width: 800px;
        margin: 20px auto;
        text-align: left; /* Gi·ªØ nguy√™n cƒÉn tr√°i */
        background: white;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        padding: 15px;
        border-radius: 5px;
      }
      .monthly-inputs label {
        display: block; /* Gi·ªØ nguy√™n ƒë·ªÉ cƒÉn tr√°i */
        margin: 10px 0; /* ƒêi·ªÅu ch·ªânh margin ƒë·ªÉ ph√π h·ª£p */
        font-weight: bold;
        color: #333;
        vertical-align: middle;
      }
      .monthly-inputs input {
        width: 200px; /* Gi·ªØ nguy√™n k√≠ch th∆∞·ªõc input */
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 16px;
        text-align: left;
        vertical-align: middle;
      }
      /* X√≥a ph·∫ßn CSS li√™n quan ƒë·∫øn tooltip v√¨ kh√¥ng c·∫ßn n·ªØa */
    </style>
  </head>
  <body>
    <div id="login-container">
      <h2>Ch√†o m·ª´ng PT!</h2>
      <p class="motivation">M·ªôt ng√†y hi·ªáu qu·∫£ b·∫Øt ƒë·∫ßu t·ª´ m·ªôt √Ω ch√≠ m·∫°nh m·∫Ω!</p>
      <p class="motivation">Lu√¥n ti·∫øn l√™n ph√≠a tr∆∞·ªõc, th√†nh c√¥ng ƒëang ƒë·ª£i b·∫°n!</p>
      <h2>ƒêƒÉng nh·∫≠p b·∫±ng m√£ code</h2>
      <input type="text" id="code-input" placeholder="Nh·∫≠p m√£ code" />
      <br />
      <input type="text" id="pt-name-input" placeholder="Nh·∫≠p t√™n PT" style="margin-top: 10px;" />
      <br /><br />
      <button onclick="checkCode()">ƒêƒÉng nh·∫≠p</button>
    </div>
    <div id="main-container" style="display: none">
      <!-- Th√™m 3 √¥ nh·∫≠p li·ªáu m·ªõi, gi·ªØ l·∫°i ch·ªâ h∆∞·ªõng d·∫´n trong placeholder, x√≥a tooltip -->
      <div class="monthly-inputs">
        <label>Rev Moth: <input type="text" id="rev-moth" placeholder="MTD REV / CM (e.g., 100/12)"></label>
        <label>Suppl Moth: <input type="text" id="suppl-moth" placeholder="Nh·∫≠p Suppl Moth"></label>
        <label>Session Moth: <input type="text" id="session-moth" placeholder="Nh·∫≠p Session Moth"></label>
      </div>
      <h2>B·∫£ng C√¥ng vi·ªác H√†ng Ng√†y</h2>
      <table>
        <thead>
          <tr>
            <th>Khung gi·ªù</th>
            <th>Lo·∫°i c√¥ng vi·ªác</th>
            <th>Chi ti·∫øt (n·∫øu c√≥)</th>
          </tr>
        </thead>
        <tbody>
          <script>
            const timeSlots = [
              "06-07", "07-08", "08-09", "09-10", "10-11", "11-12", "12-13",
              "13-14", "14-15", "15-16", "16-17", "17-18", "18-19", "19-20", "20-21"
            ];

            timeSlots.forEach((slot) => {
              document.write(`
                <tr id="row-${slot}">
                  <td>${slot.split('-')[0]}h:</td>
                  <td>
                    <select onchange="changeRowColor(this, 'row-${slot}'); showDetails(this, 'details-${slot}');">
                      <option value="">Ch·ªçn lo·∫°i c√¥ng vi·ªác</option>
                      <option value="PT">PT</option>
                      <option value="APPT">APPT</option>
                      <option value="SETUP RN">SETUP RN</option>
                      <option value="OFF">OFF</option>
                      <option value="G·ªçi ƒêT">G·ªçi ƒêT</option>
                      <option value="T·∫≠p Luy·ªán">T·∫≠p Luy·ªán</option>
                      <option value="Gi·ªù FL">Gi·ªù FL</option>
                      <option value="Gi·ªù ƒÉn">Gi·ªù ƒÉn</option>
                      <option value="ƒêi Floor kh√°ch">ƒêi Floor kh√°ch</option>
                      <option value="T√πy ch·ªçn">T√πy ch·ªçn</option>
                    </select>
                  </td>
                  <td>
                    <div id="details-${slot}" class="details-container">
                      <div class="pt-info hidden">
                        <input type="text" placeholder="H·ªç v√† t√™n kh√°ch h√†ng">
                      </div>
                      <div class="appt-info hidden">
                        <input type="text" placeholder="H·ªç v√† t√™n kh√°ch h√†ng">
                        <input type="text" placeholder="S·ªë ƒëi·ªán tho·∫°i">
                      </div>
                      <div class="setup-info hidden">
                        <input type="text" placeholder="H·ªç v√† t√™n kh√°ch h√†ng">
                        <input type="number" placeholder="S·ªë ti·ªÅn setup">
                      </div>
                      <div class="custom-info hidden">
                        <input type="text" placeholder="Ghi ch√∫ t√πy ch·ªçn">
                      </div>
                    </div>
                  </td>
                </tr>
              `);
            });
          </script>
        </tbody>
      </table>
      <div class="summary">
        <h3>T·ªïng h·ª£p cu·ªëi ng√†y</h3>
        <p>T·ªïng s·ªë bu·ªïi PT: <span id="total-pt">0</span></p>
        <p>T·ªïng s·ªë APPT: <span id="total-appt">0</span></p>
        <p>T·ªïng s·ªë SETUP RN: <span id="total-setup">0</span></p>
        <p>T·ªïng s·ªë G·ªçi ƒêT: <span id="total-call">0</span></p>
        <p>T·ªïng s·ªë T·∫≠p Luy·ªán: <span id="total-train">0</span></p>
        <p>T·ªïng s·ªë Gi·ªù FL: <span id="total-fl">0</span></p>
        <p>T·ªïng s·ªë Gi·ªù ƒÉn: <span id="total-eat">0</span></p>
        <p>T·ªïng s·ªë ƒêi Floor kh√°ch: <span id="total-floor">0</span></p>
        <p>T·ªïng s·ªë T√πy ch·ªçn: <span id="total-custom">0</span></p>
      </div>
      <div style="text-align: center; margin: 20px">
        <button id="submit-btn" onclick="copyReport()">Copy B√°o c√°o</button>
      </div>
      <div id="notification"></div>
    </div>

    <script>
      function checkCode() {
        const code = document.getElementById("code-input").value;
        const ptName = document.getElementById("pt-name-input").value;
        const codePattern = /^[0-9]{5}$/;
        if (codePattern.test(code) && ptName.trim()) {
          document.getElementById("login-container").style.display = "none";
          document.getElementById("main-container").style.display = "block";
        } else {
          alert("M√£ code ph·∫£i l√† 5 ch·ªØ s·ªë v√† t√™n PT kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng!");
        }
      }

      function changeRowColor(selectElement, rowId) {
        const value = selectElement.value;
        const row = document.getElementById(rowId);
        row.classList.remove("pt-row", "appt-row", "setup-row", "off-row", "call-row", "train-row", "fl-row", "eat-row", "floor-row", "custom-row");
        if (value === "PT") row.classList.add("pt-row");
        if (value === "APPT") row.classList.add("appt-row");
        if (value === "SETUP RN") row.classList.add("setup-row");
        if (value === "OFF") row.classList.add("off-row");
        if (value === "G·ªçi ƒêT") row.classList.add("call-row");
        if (value === "T·∫≠p Luy·ªán") row.classList.add("train-row");
        if (value === "Gi·ªù FL") row.classList.add("fl-row");
        if (value === "Gi·ªù ƒÉn") row.classList.add("eat-row");
        if (value === "ƒêi Floor kh√°ch") row.classList.add("floor-row");
        if (value === "T√πy ch·ªçn") row.classList.add("custom-row");
        updateSummary();
      }

      function showDetails(selectElement, detailsId) {
        const value = selectElement.value;
        const detailsDiv = document.getElementById(detailsId);
        detailsDiv.querySelectorAll(".pt-info, .appt-info, .setup-info, .custom-info").forEach((div) => {
          div.classList.add("hidden");
        });
        if (value === "PT") {
          detailsDiv.querySelector(".pt-info").classList.remove("hidden");
        } else if (value === "APPT") {
          detailsDiv.querySelector(".appt-info").classList.remove("hidden");
        } else if (value === "SETUP RN") {
          detailsDiv.querySelector(".setup-info").classList.remove("hidden");
        } else if (value === "T√πy ch·ªçn") {
          detailsDiv.querySelector(".custom-info").classList.remove("hidden");
        }
      }

      function updateSummary() {
        let totalPT = 0, totalAPPT = 0, totalSETUP = 0, totalCall = 0, totalTrain = 0, totalFL = 0, totalEat = 0, totalFloor = 0, totalCustom = 0;
        document.querySelectorAll("select").forEach((select) => {
          if (select.value === "PT") totalPT++;
          if (select.value === "APPT") totalAPPT++;
          if (select.value === "SETUP RN") totalSETUP++;
          if (select.value === "G·ªçi ƒêT") totalCall++;
          if (select.value === "T·∫≠p Luy·ªán") totalTrain++;
          if (select.value === "Gi·ªù FL") totalFL++;
          if (select.value === "Gi·ªù ƒÉn") totalEat++;
          if (select.value === "ƒêi Floor kh√°ch") totalFloor++;
          if (select.value === "T√πy ch·ªçn") totalCustom++;
        });
        document.getElementById("total-pt").innerText = totalPT;
        document.getElementById("total-appt").innerText = totalAPPT;
        document.getElementById("total-setup").innerText = totalSETUP;
        document.getElementById("total-call").innerText = totalCall;
        document.getElementById("total-train").innerText = totalTrain;
        document.getElementById("total-fl").innerText = totalFL;
        document.getElementById("total-eat").innerText = totalEat;
        document.getElementById("total-floor").innerText = totalFloor;
        document.getElementById("total-custom").innerText = totalCustom;
      }

      function copyReport() {
        const ptCode = document.getElementById("code-input").value;
        const ptName = document.getElementById("pt-name-input").value;
        const revMoth = document.getElementById("rev-moth").value || "";
        const supplMoth = document.getElementById("suppl-moth").value || "";
        const sessionMoth = document.getElementById("session-moth").value || "";
        const currentDate = new Date().toLocaleString("vi-VN", { 
          day: "2-digit", month: "2-digit", year: "numeric", hour: "2-digit", minute: "2-digit" 
        });
        
        let report = `PT Name: ${ptName}\nStaff Code: ${ptCode}\nB√°o c√°o CN: ${currentDate}\n`;
        report += `Rev Moth: ${revMoth}\nSuppl Moth: ${supplMoth}\nSession Moth: ${sessionMoth}\n\n`;
        
        timeSlots.forEach((slot) => {
          const select = document.querySelector(`#row-${slot} select`);
          const value = select.value || "";
          let details = "";
          
          if (value === "PT") {
            const customerName = document.querySelector(`#details-${slot} .pt-info input`)?.value || "";
            details = customerName ? `${value}/${customerName}` : value;
          } else if (value === "APPT") {
            const inputs = document.querySelectorAll(`#details-${slot} .appt-info input`);
            const customerName = inputs[0]?.value || "";
            const phone = inputs[1]?.value || "";
            details = customerName ? `${value}/${customerName}${phone ? `/${phone}` : ''}` : value;
          } else if (value === "SETUP RN") {
            const inputs = document.querySelectorAll(`#details-${slot} .setup-info input`);
            const customerName = inputs[0]?.value || "";
            const amount = inputs[1]?.value || "";
            details = customerName ? `${value}/${customerName}${amount ? `/${amount}` : ''}` : value;
          } else if (value === "T√πy ch·ªçn") {
            const customNote = document.querySelector(`#details-${slot} .custom-info input`)?.value || "";
            details = customNote ? `${value}/${customNote}` : value;
          } else {
            details = value;
          }
          
          report += `${slot.split('-')[0]}h: ${details}\n`;
        });

        // T·∫°o textarea ·∫©n ƒë·ªÉ copy d·ªØ li·ªáu
        const tempTextarea = document.createElement("textarea");
        tempTextarea.value = report;
        document.body.appendChild(tempTextarea);
        tempTextarea.select();
        try {
          document.execCommand("copy");
          const notification = document.getElementById("notification");
          notification.textContent = "üéâ B√°o c√°o ƒë√£ ƒë∆∞·ª£c copy th√†nh c√¥ng! D√°n ngay n√†o! üöÄ";
          notification.className = "copy-success";
          notification.style.display = "block";
          setTimeout(() => {
            notification.style.display = "none";
          }, 3000);
        } catch (err) {
          alert("Kh√¥ng th·ªÉ copy d·ªØ li·ªáu. Vui l√≤ng th·ª≠ l·∫°i!");
          console.error("Copy failed:", err);
        } finally {
          document.body.removeChild(tempTextarea);
        }
      }
    </script>
  </body>
</html>
